<div ng-controller="TimesheetController as timesheet" class="timesheet">
  <div class="row">
    <div class="col-md-4 sidebar">
      <div ng-repeat="task in tasks">
        <div ng-click="setCurrentTask(task)" class="task">
          <h3>{{task.name}}</h3>
          <span><strong>Total Time:</strong> {{totalTime(task) | duration}}</span>
          <br/>
          <span><strong>Time Today:</strong> {{totalTimeToday(task) | duration}}</span>
          <br/>
          <span ng-model="toRemove" ng-click="toRemove = true" ng-hide="toRemove" class="glyphicon glyphicon-trash pull-right"></span>
          <div class="btn-toolbar">
            <a ng-show="toRemove" ng-click="toRemove = false" class="btn btn-default btn-xs pull-right">Cancel</a>
            <a ng-show="toRemove" ng-click="removeTask(task)" class="btn btn-danger btn-xs pull-right">Remove</a>
          </div>
          <br/>
          <hr>
        </div>
      </div>
    </div>
    <div class="col-md-8 current-task">
      <div class="title">
        <h1 ng-hide="editingTaskName" ng-click="editingTaskName = true">{{currentTask.name}}</h1>
        <form ng-show="editingTaskName" ng-submit="editingTaskName = false" class="form-inline" style="margin:0;">
          <input type="text" ng-model="currentTask.name" placeholder="Name of the task" class="form-control input-lg" ng-required/>
          <button class="btn btn-success btn-lg" type="submit">OK</button>
        </form>
      </div>
      <div ng-repeat="(key, items) in measurementsByDate">
        <h3>{{key | date : 'mediumDate' }}</h3>
        <div ng-repeat="item in items">
          From
          <i>{{item.start_date | date : 'shortTime'}}</i>
          to <i>{{item.end_date | date : 'shortTime'}}</i>
        </div>
      </div>
    </div>
  </div>
</div>